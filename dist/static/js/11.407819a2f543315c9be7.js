webpackJsonp([11],{"/SvA":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("2v7l"),a=i("COTu"),n={name:"GroupDetail",data:function(){return{groupId:null,tabInfo:{options:["最新动态","精选动态","我的动态","公告"],current:0,values:["new","is_hot","userid","is_notice"]},loginUser:{},detailLoaded:!1,detail:{},memberList:[],dynamicLoaded:!1,dynamic:[],type:1,p:1,pageCount:null,key:"new",chargetype:-1,message:null,messageMask:!1}},methods:{changeTab:function(t){this.key=t,this.getList()},getList:function(){var t=this,e={p:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,data:{team_id:this.groupId},maxperpage:10};"userid"===this.key?this.$store.ready(function(i){var s=i.userInfo.userid;if(void 0===s)return t.$toast("请先登录").then(function(){t.$router.push({name:"UserLogin"})}),!1;e.data.userid=s,t.getTopicList(e)}):this.key?(e.data[this.key]=1,this.getTopicList(e)):this.getTopicList(e)},getTopicList:function(t){var e=this;this.dynamicLoaded=!1,this.$showLoading(),Object(a.l)(t).then(function(t){e.p=t.page.now_page,e.pageCount=t.page.total_pages,t.list.map(function(t){var e=[];t.file_path&&(t.file_path.map(function(t){e.push({src:t,w:"",h:""})}),t.file_path=e)}),1==t.page.now_page?e.dynamic=t.list:e.dynamic=e.dynamic.concat(t.list),e.dynamicLoaded=!0,e.$hideLoading()})},manage:function(){this.$router.push({path:"/group/manage",query:{groupid:this.groupId}})},release:function(t){this.$router.push({path:"/group/dynamic",query:{groupid:t}})},goMember:function(){this.$router.push({path:"/group/member",query:{groupid:this.groupId}})},join:function(){var t=this;0==this.chargetype?Object(a.p)({id:this.groupId}).then(function(e){"success"===e.result&&(t.$toast("加入成功","success"),t.getDetail())}):1==this.chargetype?this.$showPay({payid:this.groupId,msg:"加入社群",price:this.detail.price,type:"group"}):2==this.chargetype&&(this.messageMask=!0)},applist:function(){var t=this,e={team_id:this.groupId,content:this.message};this.$store.ready(function(t){e.mobile=t.userInfo.mobile}),Object(a.a)(e).then(function(e){t.$toast("申请已提交","success"),t.messageMask=!1})},getDetail:function(){var t=this;this.detailLoaded=!1,this.$showLoading(),Object(a.j)({id:this.groupId}).then(function(e){t.chargetype=e.chargetype,t.loginUser=e.loginUser,t.detail={price:e.price,banner:e.defaultpic,member:e.member_num,staus:e.topic_num,intro:e.description,title:e.title,nojoin:e.nojoin},1!=e.nojoin&&1!=e.loginUser.is_join||t.getList(),Object(a.k)({id:t.groupId}).then(function(e){t.memberList=e.list}),t.detailLoaded=!0,t.$hideLoading()})}},activated:function(){document.title="社群详情",this.groupId=this.$route.params.id,this.detail={},this.getDetail()},components:{TopicItem:s.a}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.detailLoaded?s("div",[s("ktj-create-bg",{staticClass:"group-banner",attrs:{"border-radius":"0px",src:t.detail.banner}},[s("div",{staticClass:"group-header"},[s("div",{staticClass:"group-icon"},[s("span",{staticClass:"group-img"}),t._v(" "),s("span",{staticClass:"group-name"},[t._v(t._s(t.$store.state.info.sitename))])]),t._v(" "),s("router-link",{staticClass:"group-btn",attrs:{to:"/"}},[t._v("店铺首页")])],1)]),t._v(" "),s("div",{staticClass:"group-detail"},[s("div",{staticClass:"group-tit"},[t._v(t._s(t.detail.title))]),t._v(" "),s("div",{staticClass:"group-staus"},[s("span",[t._v(t._s(t.detail.member||0)+"人加入")]),s("span",[t._v(t._s(t.detail.staus||0)+"动态")])]),t._v(" "),1==t.loginUser.is_join?s("ktj-button",{staticClass:"group-manage",attrs:{type:"primary",size:"small",plain:""},on:{click:function(e){return t.manage()}}},[t._v("管理我的社群")]):t._e()],1),t._v(" "),t.detail.intro?s("div",{staticClass:"group-detail"},[s("div",{staticClass:"group-tit"},[t._v("社群介绍")]),t._v(" "),s("div",{staticClass:"group-info"},[t._v(t._s(t.detail.intro))])]):t._e(),t._v(" "),0==t.loginUser.is_join&&t.memberList.length?s("div",{staticClass:"group-detail"},[s("div",{staticClass:"group-tit"},[t._v("社群学员"),s("span",{staticClass:"group-count"},[t._v("（"+t._s(t.memberList.length)+"人）")])]),t._v(" "),s("div",{staticClass:"group-photo"},[s("ul",{staticClass:"clearfix",attrs:{id:"member"}},[t._l(t.memberList,function(t,e){return s("li",{key:e},[s("ktj-create-bg",{staticClass:"group-wid",attrs:{src:t.userinfo.head,type:"user"}})],1)}),t._v(" "),t.memberList.length>13?s("li",{on:{click:function(e){return t.goMember()}}},[s("img",{staticClass:"group-wid",attrs:{src:i("JpGY")}})]):t._e()],2)])]):t._e(),t._v(" "),1==t.loginUser.is_join||1==t.detail.nojoin?s("div",{staticClass:"group-detail"},[0==t.loginUser.is_join?s("div",{staticClass:"group-tit"},[t._v("最新动态")]):1==t.loginUser.is_join?s("ktj-tab",{attrs:{"tab-info":t.tabInfo},on:{change:t.changeTab}}):t._e(),t._v(" "),t.dynamic.length?s("ktj-page-scroll-container",{attrs:{page:t.p,"page-count":t.pageCount},on:{"page-change":t.getList}},t._l(t.dynamic,function(e,i){return s("topic-item",{key:i,class:i<t.dynamic.length-1&&"line",attrs:{"jump-link":!0,item:e,role:t.loginUser.role,"group-id":t.groupId,"is-join":t.loginUser.is_join},on:{change:function(e){return t.getList()}}})}),1):t.dynamicLoaded?s("ktj-empty",{attrs:{msg:"没有找到任何动态~",type:"notest"}},[s("div",{staticClass:"ktj-mt15"},[0==t.dynamic.length&&1==t.loginUser.is_join&&"new"==t.key?s("ktj-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.release(t.groupId)}}},[t._v("发表动态")]):t._e()],1)]):t._e(),t._v(" "),1==t.loginUser.is_ok?s("ktj-button",{staticClass:"reply-edit",attrs:{size:"medium",icon:"ktj-icon-edit--outline",type:"primary",round:""},on:{click:function(e){return t.release(t.groupId)}}},[t._v("\n             动态\n         ")]):t._e()],1):t._e(),t._v(" "),s("store-footer"),t._v(" "),0==t.loginUser.is_join?s("div",{staticClass:"group-join"},[1==t.chargetype?s("ktj-button",{staticClass:"group-join__button",attrs:{type:"primary"},on:{click:t.join}},[t._v("\n       立即加入  |  ¥"+t._s(t.detail.price)+"\n     ")]):s("ktj-button",{staticClass:"group-join__button",attrs:{type:"success"},on:{click:t.join}},[t._v("\n       免费加入\n     ")])],1):t._e(),t._v(" "),s("ktj-dialog",{attrs:{title:"申请加入",visible:t.messageMask},on:{"update:visible":function(e){t.messageMask=e}}},[s("div",{staticClass:"message-content"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{placeholder:"请输入您的申请理由"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"message-btn ktj-color-primary",on:{click:t.applist}},[t._v("提交")])])],1):t._e()},staticRenderFns:[]};var r=i("C7Lr")(n,o,!1,function(t){i("gZQL")},"data-v-66847474",null);e.default=r.exports},JpGY:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAFLElEQVR4Xu2bW28TVxDH17k5SohkJ1GuTqNIdUAoT+UFaL9A+wZtkJDa8kRRQVVbbqK3p0KLKOUiBAh4aQGpUoHwRr8AbXioeIpQE1eK0jhXxQmSSZV7+pvUGzm213vxerPOeqWVvbtnZs78z5k558yZ41PyfE1NTbXOzc3t8fl8O7k7Ebedu4k7yLNfxK+urs7zM8M9zt3P8wD3i8rKyt76+vqRfFbRZzdzKu6bnJzcvby83A3vdxIK5yKmH+InpaWlDxoaGp4B2mouzFJpbQNgcHAwUFFRcZgKHkZI2M5KJvGKAPCdhYWFOx0dHS/tkJEzAENDQ8Hy8vKTVOYT7ho7KmWAR5wy1xYXFy+2t7eL6Vi+LANAS5SMjIwcKSkp+RbpdZZrkBthbGVl5ZvW1tZb9LwVK6wsATA8PBzGJn9C4F4rQu2moTF6AeJQW1tbxCxv0wCMjo6+j5Cb3NvMCstz+Vfw/7ilpeW+GTmGAZAuPzY2dhHmn3EbpjNTGRvKyghxtbm5+YRRkzCkSF9fX0Vtbe0vMN9vQyWdYNEzPT19sKura0FPmC4AkUjEX11d/RhGb+sxc9n332ZnZ/eFw2GZZGleWQFIdPtfoX7XZcoZrc4jzOFANnPICgAO7wqSPjUqzaXlruIYxW9lvDQBSHj7uy52eEbxFsf4odbokBGAxDj/HEK3DXVGlU4t94q1yRuZ5glpAIjd0/pPsZs9VqW5kQ59epuamt5K9QdpADC9PUqh625UItc60bjHmDbfSOazAQBZ2JSVlUUAYLPm9rnqqEcfYwEVTl5AbQAgGo2eY3HzpR6XAv/+HQ7xK1WHdQBkPe/3+//hg1NL2s3CMT4/P/+aGk9YB4B5/kls5IfNqpWTcjHxU0yQZF3z/6JGwlgAIKGnfEVynNRPVxb6/o0ZdEp4bQ0APP9eHn7XpdxCBQDhTUaEP9YAYNy/xM/nW0g/I6pcphccVwH4CwoJV3vp6geAHT6GvhBD37CXNFd1JYzWJs6vG3uQJa/nLgA44MP+z6L5+sTAYyicEwAeoXShhLrsbp8eAeBPuO6ywpl1g1JTU6OwI7RGzo6NEo/HlaWlpazsnKbTqgym/1wAEAcYMguAKFFXV6fgQDeQYldKLBbTBMFpOh29ogLALIWqzAIQDAYVdm8zkrEbrMzMZN6xcpoum170gH8FAOmvpWYBaGxsTGv9pOFFmZiYyMjSaTodvZaLABRNoOgEcx8GCaTIktr0MOgUnd4w6PmJkLenwp5fDHl+OSwOgqHQuwGRBADeDol5PigqYXHMYIDI8Otm1wSFWD4tLC5K0AtOAcCFQlTIbJ3R8zQbI2ubQMWtsWT0MIPveT5jFtECK3+ecPgXap3TtsfJ+5Vsyy27PV5VVRUOBALr0RpPJUhg+8ewfe0ECekWkiIzPj7+lF9vpsgICFsxSYpg7a5QKDSQ6q+8kCYnOkua3L1MzrqYKKkTNpYM8UJOle3B6XVbTpUVcDydLK32jkJMl6flD9LyuafLqyAkMsd/5Fkz8dglM8Irth+YSJkuf8CzTCbclkcsR2aOanl7rcbRPTCRiZCDkWGSj392y2RJ8oA5xHWIg5X5PzSVbBLMGI8wwThLBWo3o/vTANPsTn9NErSzx+aSlfXswcnUFlePzvL+o3xFliSSA//brjo6mwpEIrwmp8Xf45tth6fh+xAH1+vaw9NaPkD2HXBQu/m+EyUkF7GT32YUCfBfzbCY491L3o3xTmKTkrb7Akf7jAVMNJ/+5T8O7Nzh9agBjAAAAABJRU5ErkJggg=="},gZQL:function(t,e){}});
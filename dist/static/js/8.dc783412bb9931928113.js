webpackJsonp([8],{GKDJ:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("0xDb"),n=s("h8ON"),a={name:"Distribution",data:function(){return{windowHeight:window.innerHeight,shareFlag:!1,openid:"",realyname:"",withdrawalVisible:!1,tabActive:0,currentIncome:"",wrz:"",allMoney:"",kjs:"",myDistributton:{p:1,pageCount:null,loaded:!1,list:[]},distributeList:{p:1,pageCount:null,loaded:!1,list:[]}}},methods:{handleClick:function(t){this[0==t?"distributeList":"myDistributton"].loaded||this.getLst()},goWithdrawal:function(){var t=this;parseFloat(this.kjs)>0?this.$store.ready(function(i){Object(n.b)().then(function(s){"success"===s.result?(t.openid=s.openid,t.realyname=s.name,t.withdrawalVisible=!0):t.$toast(s.msg).then(function(){var t=location.href.split("#")[1];s.authorurl+="&wxid="+i.info.wxid+"&turnurl="+t,location.href=s.authorurl})})}):this.$toast("没有可结算的余额！","tips",2e3)},withdrawalSubmit:function(){var t=this;Object(n.a)({realyname:this.realyname,openid:this.openid}).then(function(i){"success"===i.result&&t.$toast("提交成功","success").then(function(){t.kjs=i.balance,t.withdrawalVisible=!1})})},share:function(t){var i=this;this.$store.ready(function(s){if(0==s.isLogin)i.$toast("请先登录").then(function(){i.$router.push({name:"UserLogin"})});else{var n=Object(e.f)(t.type),a="课程"===n?"门":"个";i.currentIncome=t.commission;var r=i.$router.resolve({name:"CourseView",params:{id:t.id},query:{distributeUserId:s.userInfo.userid}}),o=location.href.split("#")[0]+r.href;i.$wxShare({title:t.title,desc:"这"+a+n+"不错，快来跟我一起学~",imgUrl:t.defaultpic,link:o}),i.$showMask({click:function(){i.shareFlag=!1,i.$hideMask()}}),i.shareFlag=!0}})},open:function(t){var i=Object(e.g)(t,"id");this.$router.push({path:i})},getLst:function(){var t=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments[1];this.$showLoading();var e=0==this.tabActive?"distributeList":"myDistributton";this[e].p=i,1==i&&(this[e].loaded=!1,this[e].list=[]),0==this.tabActive&&Object(n.c)({p:i,maxperpage:10,title:this.$route.query.key||""}).then(function(i){t.distributeList.pageCount=i.page.total_pages,t.distributeList.list=t.distributeList.list.concat(i.list),t.distributeList.loaded=!0,t.$hideLoading()}),(1==this.tabActive||s)&&Object(n.d)({p:i,maxperpage:10}).then(function(i){t.wrz=i.djs||"0.00",t.allMoney=i.allmoney||"0.00",t.kjs=i.kjs||"0.00",t.myDistributton.pageCount=i.page.total_pages,t.myDistributton.list=t.myDistributton.list.concat(i.list),t.myDistributton.loaded=!0,t.$hideLoading()})}},mounted:function(){var t=this;window.addEventListener("resize",function(){t.windowHeight=window.innerHeight})},activated:function(){document.title="我的分销",this.getLst(1,!0)}},r={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"distributton-card-wrap",style:{minHeight:t.windowHeight+"px"}},[e("transition",{attrs:{name:"fade-up"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.shareFlag,expression:"shareFlag"}],staticClass:"share-confirm"},[e("div",{staticClass:"share-confirm-img"},[e("img",{attrs:{src:s("HHIg")}})]),t._v(" "),e("div",{staticClass:"share-confirm-content"},[e("h5",[t._v(" 分享赚钱")]),t._v(" "),e("div",{staticClass:"share-confirm-del"},[t._v("\n                推荐课程给好友,赚"+t._s(t.currentIncome)+"元学费\n            ")]),t._v(" "),e("div",{staticClass:"share-confirm-share"},[t._v("\n                点击右上角分享按钮即可以完成分享\n            ")])])])]),t._v(" "),e("div",{staticClass:"distributton-card"},[e("div",{staticClass:"distributton-card__body clearfix"},[e("ul",[e("li",[e("p",[t._v("累计收益（元）")]),t._v(" "),e("p",{staticClass:"price"},[t._v(t._s(t.allMoney))]),t._v(" "),e("p",[e("router-link",{staticClass:"distributton-card__withdraw",attrs:{to:"/user/distribution/withdrawalsRecord"}},[t._v("提现记录"),e("i",{staticClass:"ktj-icon ktj-icon-arrow-ios-forward-outline"})])],1)]),t._v(" "),e("li",[e("p",[t._v("未入账")]),t._v(" "),e("p",{staticClass:"price"},[t._v(t._s(t.wrz))])])])]),t._v(" "),e("div",{staticClass:"distributton-card__footer"},[e("ktj-button",{staticClass:"ktj-fr",attrs:{type:"primary",size:"small",round:""},on:{click:t.goWithdrawal}},[t._v("去提现")]),t._v("\n            可提现金额（元）："+t._s(t.kjs)+"\n        ")],1)]),t._v(" "),e("ktj-page-scroll-container",{staticClass:"distributton-list ktj-mt15",attrs:{page:0==t.tabActive?t.distributeList.p:t.myDistributton.p,"page-count":0==t.tabActive?t.distributeList.pageCount:t.myDistributton.pageCount},on:{"page-change":t.getLst}},[e("ktj-tabs",{on:{"tab-click":t.handleClick},model:{value:t.tabActive,callback:function(i){t.tabActive=i},expression:"tabActive"}},[e("ktj-tab-pane",{attrs:{label:"我要分销",name:0}},[e("drag-search",{staticStyle:{margin:"5px 5px 0 5px"},attrs:{bg:"gray"},on:{enter:function(i){return t.getLst()}}}),t._v(" "),t.distributeList.list.length?e("div",t._l(t.distributeList.list,function(i){return e("div",{key:i.id,staticClass:"distributton-list__item",on:{click:function(s){return t.open(i)}}},[e("ktj-create-bg",{staticClass:"distributton-list__item_img",attrs:{src:i.defaultpic}}),t._v(" "),e("div",{staticClass:"distributton-list__item_title"},[t._v("\n                            "+t._s(i.title)+"\n                        ")]),t._v(" "),e("div",{staticClass:"distributton-list__item_income"},[e("ktj-button",{staticClass:"ktj-fr",attrs:{size:"mini",plain:""},nativeOn:{click:function(s){return s.stopPropagation(),t.share(i)}}},[t._v("推广")]),t._v("\n                            预计收益："+t._s(i.commission)+"元\n                        ")],1)],1)}),0):t.distributeList.loaded?e("ktj-empty",{attrs:{msg:"暂时没有任何数据~"}}):t._e()],1),t._v(" "),e("ktj-tab-pane",{attrs:{label:"我的收益",name:1}},[t.myDistributton.list.length?e("div",t._l(t.myDistributton.list,function(i){return e("div",{key:i.id,staticClass:"distributton-list__item"},[e("ktj-create-bg",{staticClass:"distributton-list__item_img",attrs:{src:i.defaultpic}}),t._v(" "),e("div",{staticClass:"distributton-list__item_title"},[t._v("\n                            "+t._s(i.title)+"\n                        ")]),t._v(" "),e("div",{staticClass:"distributton-list__item_income"},[e("span",{staticClass:"ktj-fr"},[t._v("\n                                "+t._s(i.paydate)+"\n                            ")]),t._v("\n                            +"+t._s(i.distribute_amount)+"元\n                        ")])],1)}),0):t.myDistributton.loaded?e("ktj-empty",{attrs:{msg:"暂时没有任何数据~"}}):t._e()],1)],1)],1),t._v(" "),e("ktj-dialog",{attrs:{title:"微信提现",visible:t.withdrawalVisible},on:{"update:visible":function(i){t.withdrawalVisible=i}}},[e("div",{staticClass:"withdrawal-tips"},[t._v("\n            此次您提现的金额为 "),e("strong",{staticClass:"ktj-color-primary"},[t._v(t._s(t.kjs)+"元")]),t._v("，\n            "),e("br"),t._v("\n            微信转账需要验证您微信所绑定银行卡的真实姓名\n        ")]),t._v(" "),e("ktj-form",{staticClass:"ktj-mt10",attrs:{"label-width":"80px"}},[e("ktj-form-item",{attrs:{label:"真实姓名",required:""}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.realyname,expression:"realyname"}],staticClass:"ktj-input",attrs:{type:"text",placeholder:"请输入真实姓名"},domProps:{value:t.realyname},on:{input:function(i){i.target.composing||(t.realyname=i.target.value)}}})])],1),t._v(" "),e("div",{staticClass:"ktj-mt20",attrs:{align:"center"}},[e("ktj-button",{attrs:{type:"primary",size:"medium"},on:{click:t.withdrawalSubmit}},[t._v("确认提交")]),t._v(" "),e("ktj-button",{staticClass:"ktj-ml5",attrs:{size:"medium"},on:{click:function(i){t.withdrawalVisible=!1}}},[t._v("取消")])],1)],1),t._v(" "),e("store-footer")],1)},staticRenderFns:[]};var o=s("C7Lr")(a,r,!1,function(t){s("thg2")},"data-v-3a399edc",null);i.default=o.exports},HHIg:function(t,i,s){t.exports=s.p+"static/img/share-img.d772cba.png"},h8ON:function(t,i,s){"use strict";i.d=function(t){return new n.a(function(i){Object(a.b)("Distribution.Common.myDistributeList",t).then(function(t){i(t)})})},i.c=function(t){return new n.a(function(i){Object(a.b)("Distribution.Common.distributionList",t).then(function(t){i(t)})})},i.b=function(t){return new n.a(function(i){Object(a.b)("Distribution.Common.checkApplyBindWechat",t,{isErrorCall:!0}).then(function(t){i(t)})})},i.a=function(t){return new n.a(function(i){Object(a.b)("Distribution.Common.applyDistributeWithdrawal",t).then(function(t){i(t)})})},i.e=function(t){return new n.a(function(i){Object(a.b)("Distribution.Common.myDistributeWithdrawalRecord",t).then(function(t){i(t)})})};var e=s("rVsN"),n=s.n(e),a=s("60kx")},thg2:function(t,i){}});
webpackJsonp([5],{P8Ur:function(e,t){},TgUB:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("6zNQ"),i=s("vFVh"),r=s("7rGV"),n=s("AfSb"),o=s("h0S9"),c={name:"CourseView",data:function(){return{loaded:!1,courseid:this.$route.params.id,errTips:null,h5Info:{},courseInfo:{},tab:0,isFree:!1,isCanLearn:!1,currentPlayId:null,chapter:[],chapterType:null}},methods:{buy:function(){this.$showPay({payid:this.courseid,msg:"购买课程",price:this.courseInfo.price,type:"course"})},play:function(e,t){var s=this;this.errTips="";var a=e.freeplay,i=e.chapterid,r=this.courseInfo.courseType;if(1!=a&&!this.isCanLearn)return this.$toast("请先购买"),!1;if(1==r)Object(o.f)({courseid:this.courseid,chapterid:i}).then(function(e){if("10002"===e.errcode)return s.$toast("请先登录").then(function(){s.$router.push({name:"UserLogin"})}),!1;if(10005==e.code)return s.$toast(e.msg),!1;if("系统出错"==e.msg)return s.errTips="暂无视频",!1;var t=e;t.mediaType="video",s.$refs.itemHeader.playMedia(t),s.currentPlayId=i});else if(3==r){var n={videoid:e.videoId,title:e.title,mediaType:"audio"};t&&(n.parentTitle=t.title),this.$refs.itemHeader.playMedia(n),this.currentPlayId=i}},setChapterData:function(e){var t=this;e.map(function(e){1!=e.depth&&2!=e.depth||(e.slideShow=!0),e.Section&&t.setChapterData(e.Section)})},open:function(e){location.href=e}},activated:function(){var e=this;this.$showLoading(),document.title="课程详情",this.loaded=!1,this.tab=0,this.isCanLearn=!1,this.isFree=!1,this.courseid=this.$route.params.id,Object(o.e)({id:this.courseid}).then(function(t){var s=t.courseinfo;s.studentcount=parseInt(s.studentcount),s.hourcount=parseInt(s.hourcount),s.expecthour=parseInt(s.expecthour),1==s.iscopy&&e.$antiCopy(!0),e.courseInfo=s,e.h5Info=t.h5info;var a=t.chapter.chapter;e.setChapterData(a),e.chapter=a,e.chapterType=t.chapter.istype,"0.00"!=s.price&&1==s.chargetype||(e.isFree=!0),"0.00"!=s.price&&1!=s.isbuy&&1==s.chargetype||(e.isCanLearn=!0),e.$wxShare({title:s.title,desc:s.shortdesc,imgUrl:s.defaultpic}),e.loaded=!0,e.$nextTick(function(){if(1!=s.coursehour&&e.isCanLearn)e.play(e.chapter[0]);else if(1==s.coursehour&&e.isCanLearn){if(!e.chapter)return!1;if(e.tab=1,2==e.chapterType)e.play(e.chapter[0]);else{for(var t=void 0,a=void 0,i=0;i<e.chapter.length;i++){var r=e.chapter[i];if(r.Section)for(var n=0;n<r.Section.length;n++){var o=r.Section[n];if(o.keshi&&!t){t=o.keshi[0],a=o;break}}else if(r.keshi&&!t){t=r.keshi[0],a=r;break}}t&&e.play(t,a)}}e.$refs.skContent?e.$setPreview(e.$refs.skContent):e.$refs.content&&e.$setPreview(e.$refs.content),e.$hideLoading()})})},deactivated:function(){this.$antiCopy(!1)},components:{ItemHeader:a.a,Reward:r.a,CourseCatalog:i.a,Comment:n.a}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return e.loaded?s("div",{staticClass:"course_container"},[s("div",{staticClass:"course_content"},[s("item-header",{ref:"itemHeader",attrs:{info:e.courseInfo,"info-type":"course","err-tips":e.errTips}}),e._v(" "),1==e.courseInfo.coursehour?s("div",{staticClass:"tab line"},[s("div",{staticClass:"tab-item on-log",class:0==e.tab&&"active",on:{click:function(t){e.tab=0}}},[e._v("课程介绍")]),e._v(" "),s("div",{staticClass:"tab-item on-log",class:1==e.tab&&"active",on:{click:function(t){e.tab=1}}},[e._v("目录")]),e._v(" "),s("div",{staticClass:"tab-item on-log",class:2==e.tab&&"active",on:{click:function(t){e.tab=2}}},[e._v("用户评论")])]):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==e.tab,expression:"tab == 0"}],staticClass:"intro-anchor"},[4==e.courseInfo.courseType?s("div",{staticClass:"ktj-content"},[1==e.courseInfo.coursehour||e.isCanLearn?s("div",[s("div",{ref:"content",domProps:{innerHTML:e._s(e.courseInfo.content)}})]):s("div",[s("div",{ref:"skContent",domProps:{innerHTML:e._s(e.courseInfo.announce)}}),e._v(" "),s("div",{staticClass:"buy-article-tips line line-top"},[e._v("本内容需要购买之后才能阅读全文")])])]):s("div",{staticClass:"ktj-content"},[s("div",{staticClass:"ktj-content__head"},[e._v("课程简介")]),e._v(" "),s("div",{domProps:{innerHTML:e._s(e.courseInfo.content)}})]),e._v(" "),2==e.courseInfo.chargetype?s("reward",{attrs:{type:"courseReward","info-id":e.courseid}}):e._e()],1),e._v(" "),1==e.courseInfo.coursehour?s("div",{directives:[{name:"show",rawName:"v-show",value:1==e.tab,expression:"tab == 1"}],staticClass:"catalog-anchor"},[s("course-catalog",{attrs:{"course-type":e.courseInfo.courseType,"current-play-id":e.currentPlayId,"is-can-learn":e.isCanLearn,chapter:e.chapter,"chapter-type":e.chapterType},on:{play:e.play}})],1):e._e(),e._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:2==e.tab||1!=e.courseInfo.coursehour,expression:"tab == 2 || courseInfo.coursehour != 1"}],staticClass:"comment-anchor",class:1!=e.courseInfo.coursehour&&"ktj-mt10"},[e.courseid?s("comment",{attrs:{"comment-switch":e.isCanLearn,appid:"6","info-id":e.courseid}}):e._e()],1)],1),e._v(" "),s("store-info",{staticClass:"ktj-mt10"}),e._v(" "),s("store-footer"),e._v(" "),e.isCanLearn?e.isCanLearn&&2==e.courseInfo.courseType?s("div",{staticClass:"footer-button"},[s("div",{staticClass:"footer-button__fixed"},[s("ktj-button",{attrs:{type:"primary"},on:{click:function(t){return e.open(e.courseInfo.liveurl)}}},[e._v("进入直播")])],1)]):e._e():s("div",{staticClass:"footer-button"},[s("div",{staticClass:"footer-button__fixed"},[s("ktj-button",{attrs:{type:"primary"},on:{click:e.buy}},[e._v("购买课程")])],1)])],1):e._e()},staticRenderFns:[]};var l=s("C7Lr")(c,u,!1,function(e){s("yUJy")},"data-v-20afe838",null);t.default=l.exports},vFVh:function(e,t,s){"use strict";var a={name:"CourseCatalog",props:["chapter","chapterType","isCanLearn","currentPlayId","courseType"],methods:{play:function(e,t){1==this.courseType||3==this.courseType?this.$emit("play",e,t):2==this.courseType?location.href="/h5market/audioin?infoid="+e.courseid+"&cid="+e.chapterid:4==this.courseType&&this.$router.push({name:"GraphicLearn",params:{id:e.courseid},query:{chapterid:e.chapterid}})}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.chapter.length?s("div",[2==e.chapterType?s("div",{staticClass:"keshi-box"},e._l(e.chapter,function(t,a){return s("div",{key:a,staticClass:"keshi-item",class:e.currentPlayId==t.chapterid&&"on",on:{click:function(s){return e.play(t)}}},[e.isCanLearn||1==t.freeplay?e.isCanLearn?e._e():s("span",{staticClass:"free"},[e._v("免费")]):s("i",{staticClass:"eva-icon lock-outline"}),e._v(" "),1==e.courseType?s("span",{staticClass:"type"},[e._v("视频")]):2==e.courseType?s("span",{staticClass:"type"},[e._v("直播")]):3==e.courseType?s("span",{staticClass:"type"},[e._v("音频")]):4==e.courseType?s("span",{staticClass:"type"},[e._v("图文")]):e._e(),e._v("\n                "+e._s(t.title)+"\n            ")])}),0):s("div",e._l(e.chapter,function(t,a){return s("div",{key:a,staticClass:"chapter-box"},[s("div",{staticClass:"chapter-name",on:{click:function(e){t.slideShow=!t.slideShow}}},[s("i",{staticClass:"eva-icon arrow-ios-downward-outline",class:t.slideShow&&"arrow-up"}),e._v("\n                    "+e._s(t.title)+"\n                ")]),e._v(" "),t.Section?s("div",{directives:[{name:"show",rawName:"v-show",value:t.slideShow,expression:"item.slideShow"}],staticClass:"section-box"},e._l(t.Section,function(t,a){return s("div",{key:a,staticClass:"section-item"},[s("div",{staticClass:"section-name",on:{click:function(e){t.slideShow=!t.slideShow}}},[t.keshi&&t.keshi.length?s("i",{staticClass:"eva-icon arrow-ios-downward-outline",class:t.slideShow&&"arrow-up"}):e._e(),e._v("\n                            "+e._s(t.title)+"\n                        ")]),e._v(" "),t.keshi?s("div",{directives:[{name:"show",rawName:"v-show",value:t.slideShow,expression:"section.slideShow"}],staticClass:"keshi-box"},e._l(t.keshi,function(a,i){return s("div",{key:i,staticClass:"keshi-item",class:e.currentPlayId==a.chapterid&&"on",on:{click:function(s){return e.play(a,t)}}},[e.isCanLearn||1==a.freeplay?e.isCanLearn?e._e():s("span",{staticClass:"free"},[e._v("免费")]):s("i",{staticClass:"eva-icon lock-outline"}),e._v(" "),1==e.courseType?s("span",{staticClass:"type"},[e._v("视频")]):2==e.courseType?s("span",{staticClass:"type"},[e._v("直播")]):3==e.courseType?s("span",{staticClass:"type"},[e._v("音频")]):4==e.courseType?s("span",{staticClass:"type"},[e._v("图文")]):e._e(),e._v("\n                                "+e._s(a.title)+"\n                            ")])}),0):e._e()])}),0):t.keshi?s("div",{directives:[{name:"show",rawName:"v-show",value:t.slideShow,expression:"item.slideShow"}],staticClass:"keshi-box"},e._l(t.keshi,function(a,i){return s("div",{key:i,staticClass:"keshi-item",class:e.currentPlayId==a.chapterid&&"on",on:{click:function(s){return e.play(a,t)}}},[e.isCanLearn||1==a.freeplay?e.isCanLearn?e._e():s("span",{staticClass:"free"},[e._v("免费")]):s("i",{staticClass:"eva-icon lock-outline"}),e._v(" "),1==e.courseType?s("span",{staticClass:"type"},[e._v("视频")]):2==e.courseType?s("span",{staticClass:"type"},[e._v("直播")]):3==e.courseType?s("span",{staticClass:"type"},[e._v("音频")]):4==e.courseType?s("span",{staticClass:"type"},[e._v("图文")]):e._e(),e._v("\n                        "+e._s(a.title)+"\n                    ")])}),0):e._e()])}),0)]):s("ktj-empty",{attrs:{msg:"该课程下暂无课时～",type:"nolesson"}})],1)},staticRenderFns:[]};var r=s("C7Lr")(a,i,!1,function(e){s("P8Ur")},"data-v-1a2fdf4a",null);t.a=r.exports},yUJy:function(e,t){}});
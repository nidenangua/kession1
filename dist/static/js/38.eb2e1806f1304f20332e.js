webpackJsonp([38],{LHMq:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0xDb"),r=a("Llv5"),i={},o={name:"CourseList",data:function(){return{loaded:!1,pageCount:null,tabActive:0,params:{act:"appCourse",callKeyName:"courseList",p:1,data:{},maxperpage:10},list:[]}},methods:{goSearch:function(t){i={},this.resetParams(),this.getList()},resetParams:function(t){t=t||{},this.pageCount=t.pageCount||null,this.params.p=t.p||1,this.list=t.list||[],this.loaded=t.loaded||!1},resetFilter:function(){for(var t=this.$store.state.module,e=this.$route.query.type||t[0].type,a=this.$route.query.courseType,s={},r=void 0,o=0;o<t.length;o++){var n=t[o];if(n.type==e){if(2!=e){s=n,r=o;break}if(a&&a==n.courseType){s=n,r=o;break}if(!a){s=n,r=o;break}}}this.tabActive=r||0,2==s.type?(this.params.act="appCourse",this.params.data={courseType:s.courseType}):1==s.type&&(this.params.act="appClass",this.params.data={});var p=this.$store.state.module[this.tabActive],u=i["data"+p.type+p.courseType];u?this.resetParams(u):(this.resetParams(),this.getList())},slideTab:function(t){var e=this,a=this.$store.state.module[t],s={type:a.type};2==a.type&&(s.courseType=a.courseType);var r=this.$route.query.key||"";r&&(s.key=r),this.$router.push({name:"CourseList",query:s}),this.$store.ready(function(){e.resetFilter()})},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$showLoading(),this.params.p=e;var a=this.$route.query.key||"";this.params.data.sql_or_like={title:a},Object(r.a)([this.params]).then(function(e){var a=e.courseList;t.pageCount=a.page.total_pages,t.list=t.list.concat(a.list),t.loaded=!0;var r=t.$store.state.module[t.tabActive];i["data"+r.type+r.courseType]={loaded:!0,list:Object(s.a)(t.list),p:t.params.p,pageCount:t.pageCount},t.$hideLoading()})}},activated:function(){var t=this;document.title="发现",this.$store.ready(function(){t.resetFilter()})}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("drag-search",{on:{enter:t.goSearch}}),t._v(" "),a("ktj-tabs",{on:{change:t.slideTab},model:{value:t.tabActive,callback:function(e){t.tabActive=e},expression:"tabActive"}},t._l(t.$store.state.module,function(t,e){return a("ktj-tab-pane",{key:e,attrs:{label:t.name,name:e}})}),1),t._v(" "),t.list.length?a("ktj-page-scroll-container",{attrs:{page:t.params.p,"page-count":t.pageCount},on:{"page-change":t.getList}},["appCourse"===t.params.act?a("drag-course",{attrs:{"data-type":"course","data-list":t.list}}):"appClass"===t.params.act?a("drag-course",{attrs:{"data-type":"class","data-list":t.list}}):t._e()],1):t.loaded?a("ktj-empty",{attrs:{msg:"没有找到任何课程~",type:"nogift"}}):t._e()],1)},staticRenderFns:[]};var p=a("C7Lr")(o,n,!1,function(t){a("eDzM")},"data-v-2224df1d",null);e.default=p.exports},eDzM:function(t,e){}});